#!/Users/Stomp/.rvm/rubies/ruby-2.0.0-p195/bin/ruby
require File.join(File.dirname(__FILE__),'../lib/pso_binary_type1')
require "/Users/Stomp/Development/Ruby/nrp/nrp"


def time() 
  start_time = Time.now
  yield()
  end_time = Time.now
  end_time - start_time
end

run_time = time{
  @nrp_test_path = "/Users/Stomp/Development/Ruby/nrp/nrp-tests/"
  @nrp = NRP.new :path => @nrp_test_path << 'nrp1.txt', :ratio => 0.3
  PSO.max_velocity = 3.0
  PSO.min_velocity = -4.0
  @pso = PSO_Binary_Type1.new(20,@nrp.customers.size,@nrp.method(:fitness))

  def maximum_weight()
    @nrp.weight(Array.new(@nrp.customers.size,1))
  end
  puts "number of customers = #{@nrp.customers.size}"
  puts "maximum weight = #{maximum_weight}"

  10000.times do 
    @pso.explore!
  end

  puts "nrp 1 0.3"
  puts "best = #{@pso.g_best.value}"
  puts "budget = #{@nrp.budget}"
  puts "cost = #{@nrp.cost(@pso.g_best.position)}"

  #@nrp_test_path = "/Users/Stomp/Development/Ruby/nrp/nrp-tests/"
  #@nrp = NRP.new :path => @nrp_test_path << 'nrp1.txt', :ratio => 0.5
  #@pso = PSO_Binary_Type1.new(20,@nrp.customers.size,@nrp.method(:fitness))
  #10000.times do 
  #  @pso.explore!
  #end
  #puts "nrp 1 0.5"
  #puts "best = #{@pso.g_best.value}"
  #puts "budget = #{@nrp.budget}"
  #puts "cost = #{@nrp.cost(@pso.g_best.position)}"

  #@nrp_test_path = "/Users/Stomp/Development/Ruby/nrp/nrp-tests/"
  #@nrp = NRP.new :path => @nrp_test_path << 'nrp1.txt', :ratio => 0.7
  #@pso = PSO_Binary_Type1.new(20,@nrp.customers.size,@nrp.method(:fitness))
  #10000.times do 
  #  @pso.explore!
  #end
  #puts "nrp 1 0.7"
  #puts "best = #{@pso.g_best.value}"
  #puts "budget = #{@nrp.budget}"
  #puts "cost = #{@nrp.cost(@pso.g_best.position)}"
}

puts 
puts "run_time = #{run_time} seconds"

